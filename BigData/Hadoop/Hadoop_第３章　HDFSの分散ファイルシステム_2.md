# 分散大規模データ処理システム -- Hadoop-4

# 第３章　HDFSの分散ファイルシステム-2

## 第４節　HDFSメタデータの管理仕組み

### 4.1　メタデータ管理の概説

#### FsimageとEdits

　　所謂のメタデータの管理が、HDFS内で既定のデータの様々な属性の記録、データ自体の記録、全ての変更操作の記録に関するものです。メタデータの記録量と記録の書き込み速さを兼ね合おうと、HDFSが二つのファイル形式を引用して、それはFsimageとEditsです。

**Fsimage鏡像ファイル**：メタデータの永続的な格納の箇所、HDFS内の全ての目録とファイルのメタデータ情報を含んでいるが、ファイルブロックの位置情報は含まれていません。ファイルブロックの位置情報はメモリ内にのみ保存されており、DataNodeがクラスタに参加したときにNameNodeがdatanodeに問い合わせて取得し、断続的に更新されます。

**Edits編集ログ**：全ての変更操作（ファイルの作成、削除、又は変更）を記録するログです。クライアントから行った変更操作はまずeditsファイルに記録され、記録の過程がメモリに実行します。

　　ディスクに格納したFsimageとメモリに最新の変更記録Editsに結びつけて完全のメタデータファイルに組み合わせてなります。

#### NNと2NN

　　メタデータ管理にはNameNodeやSecondaryNameNodeから共同に担当します。

**NameNode**：HDFSのメタデータを永続的に保存し、クライアントからのHDFSに対するさまざまな操作の請求を処理します。

**SecondaryNameNode**：NameNodeを協力してメタデータについてバックアップします。

　　SecondaryNameNode名称から見てNameNodeのバックアップサーバーみたいの存在で、ただ2NNがHDFS中にの一つの部品だけで、単独で運行するのは意味ありません。NNにも2NNにもメタデータの処理に関係があります。実はメタデータの処理が確かに一番目重要の部分です。

　　本節はどうメタデータの処理をめぐってNNや2NNの運行仕組み、メタデータの構造を紹介してきます。

### 4.2　メタデータ管理の流れ

![OIP1](D:\OneDrive\picture\Typora\BigData\Hadoop\OIP1.jpg)

