# 分散型協調サービスフレームワーク -- Zookeeper-1

## 第１章　Zookeeperの紹介

### 第１節　Zookeeperの概説

　　ZooKeeperは、分散型協調サービスのフレームワークと知られている。このフレームワークの主な目的は、分散型クラスタシステム（cluster system）の間の一致性の問題を解決してきて、高信頼性、高性能や利便性など特性が備わってる。

- この結構が伝統のファイルシステムの使い慣れに倣って、木構造のような目録を採用して分かりやすく表現されている。而も、Zookeeperのプログラミング、システムも簡単のAPIを提供してある。
- 一定な量のデータがメモリに保存され、つまり、高吞吐量や低遅延の伝送が実現できる。
- 各サーバの一致を保証するため、毎サーバに相同なデータバックアップを保存されてあり、全てのバックアップが一所からコピーされて作成し、どの節点を訪問しても同じデータを取得できる。
- ZooKeeperの更新処理には、厳しく受けたの順調に沿って行い、全ての流れが原子性が備わって、データ伝送層で全部更新が成功するか全部失敗するかいずれかの状態に決まってなる。
- 高信頼性が備わって、半分以上サーバ保留するだけ、全てのシステムも正常に運行できる

### 第２節　Zookeeperの組成

![image-20231004151356554](C:\Users\Izaya\AppData\Roaming\Typora\typora-user-images\image-20231004151356554.png)

**Leader**

　　Zookeeperクラスタシステムの核心な役割を果たす存在で、クラスタ内の各サーバの協調任務を担当する。更新、改修、消除などトランザクション操作において、Leaderは唯一の実行者であり、サーバが外部から受け取ったトランザクション請求をLeaderに転送する。順調に受信したのLeaderは、自分のバックアップを更新し、最新のバックアップを他のサーバに配布することで、全てのサーバのバックアップが一致性を保証する。重要な点として、Leader自体がずっと変わらないことがない、毎回外部から受信する時に全てのサーバが新しいLeaderを選出し、任意のサーバがLeaderになり可能性がある。

**Follower**

　　外部から非トランザクション請求を処理し、Leaderの選出に投票する役割を果たす。トランザクション請求を受ける場合はLeaderに転送する。

**Observer**

　　Followerの作用に似てるが、投票に参加することがない。その原因は一回の選挙が必ず半数以上サーバ参加し、それが事件の処理の効率を引き下げるになる。主な役割はトランザクション処理を響かないの上で、読み取り能力を向上させることです。

### 第３節　Zookeeper特徴の纏め

- ZookeeperがLeaderと複数のFollowerから構成されるクラスタです。
- Leaderは投票の発起と決議し、システムの状態を更新する。
- Followerはクライアントの請求を受け取り、クライアントに結果を返す。また、Leaderの選出流れに投票で参加する。
- クラスタ内で半数以上の節点（node）が生存していれば、ZooKeeperクラスターは正常にサービスを提供できる。
- 各サーバーは同じバックアップを持っており、クライアントがどのサーバーに接続しても同じデータを取得できる。
- 更新訪問は順番に処理される。非更新訪問が併発処理ができる。
- LeaderとFollowerの間の伝送層にデータの更新は一度に成功するか失敗するかのいずれかです。
